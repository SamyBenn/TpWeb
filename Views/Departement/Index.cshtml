@using TpWeb.Models
@model DepartementDTO;
@*Si erreur du côté serveur... affichage du message d'erreur...*@
@if (ViewBag.MessageErreur != null)
{
    <br>
    <h2 class="alert-danger">@ViewBag.MessageErreur</h2>
}
else
{
    <h3>Selectionnez un Cégep</h3>

    <form asp-controller="Departement" asp-action="Index" method="get">
        <select name="cegep" id="cegep" onchange="submit();">

            @foreach(CegepDTO cegep in ViewBag.ListeCegeps)
            {
                if(ViewBag.Cegep.Nom.Equals(@cegep.Nom))
                {
                    <option value=@cegep.Nom selected>@cegep.Nom</option>
                }
                else
                {
                    <option value=@cegep.Nom>@cegep.Nom</option>
                }
            }
        </select>
    </form>

    @*Affichage de la liste des dep...*@
    <br>
    <h3>Liste des département(s) (@ViewBag.ListeDepartements.Length Departement(s)) :</h3>
    <br>
       
    <table>
        <tbody><tr>
            <th>No</th>
            <th>Nom</th>
            <th>Description</th>
        </tr>@foreach (DepartementDTO departement in ViewBag.ListeDepartements)
        {<tr>
                <td>@departement.No</td>
                <td>@departement.Nom</td>
                <td>@departement.Description</td>
            </tr> }
        </tbody>
     </table>

     <br />
    <h3>Ajouter un Departement</h3>
    <br />

     <form asp-controller="Departement" asp-action="AjouterDepartement" method="post">
         <input type="hidden" name="nomCegep" value="@ViewBag.Cegep.Nom"/>
        <table>
            <tbody><tr>
                <td><label asp-for="No"></label></td>
                <td> <input asp-for="No">  </td>
            </tr>
            <tr>
                <td> <label asp-for="Nom"></label></td>
                <td>  <input asp-for="Nom"> </td>
            </tr>
            <tr>
                <td> <label asp-for="Description"></label></td>
                <td> <input asp-for="Description"> </td>
            </tr>
        </tbody></table>
        <input type="submit" value="Ajouter">
    </form>
}


